pipeline {
   agent none
   tools {
       // use Matlab from Jenkins tool settings
       matlab 'Matlab R2022a'
   }
   options {
            buildDiscarder logRotator(artifactDaysToKeepStr: '3', artifactNumToKeepStr: '7', daysToKeepStr: '3', numToKeepStr: '7')
    }
    stages{
        stage('Build: Run MATLAB Commands') {
            steps
            {
               runMATLABCommand 'ver'
               //runMATLABCommand 'addpath("mScripts"), 'extract_unresolved_links'
            }       
        } 
	    stage('Run MATLAB Tests') {
            steps
            {
                runMATLABTests()
            }       
        }                 
    } 
}